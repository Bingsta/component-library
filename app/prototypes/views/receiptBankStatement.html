<div class="app-container">
  <!-- ko widget: {kind:'productNavigation'}--><!--/ko-->
  <div class="app-main"   data-bind="css:{'app-navigation--open': uiController.appMenuOpen()}">
    <div class="app-header">
      <!-- ko widget: {kind:'globalHeader'}--><!--/ko-->
    </div>
    <div class="app-page-container"> 


      <div class="app-page app-list">



        <div class="app-page-masthead app-page__header">

          <div class="app-page-masthead__titlebar  header"> 
            <div class="app-page-masthead__titlebar-left  header__left"> 
              <h3 class="app-page-masthead__titlebar-title  header__title">
                <small><i class="icon-meter"></i> <i class="icon-arrow-right3"></i> </small>  Receipt bank statement 
              </h3>
            </div>
            <div class="app-page-masthead__titlebar-right  header-right">
              <div>
                <label class="branch-data-select__label" for="branch-data-select">Showing data from </label>
              </div>
              <div>
                <select id="branch-data-select" class="form-control input-sm">
                  <option>All branches</option>
                  <option>Swansea branch</option>
                  <option>Cardiff branch</option>
                  <option>Newport branch</option>
                  <option>Pontpandy branch</option>
                </select>
              </div>
            </div>
          </div>
          
        </div>



        <div class="app-page__content">
          
          <aside class="app-page__aside">
            <div class="app-page-aside__header  header">
              <div class="header__left">
                <h4 class="app-page-aside-header__title  header__title">
                  Bank statement items
                </h4>
              </div>
            </div>
            <div class="app-page-aside__content">
              <table class="table">
                <tbody data-bind="foreach:autoMatched">
                  <tr data-bind="css:{active: $parent.selectedItem() == $data}, click:$parent.handleStatementItemClick.bind($parent)">
                    <td>
                      <strong data-bind="text:reference"></strong><br/>
                      <span data-bind="text:name"></span>
                    </td>
                    <td>
                      <strong data-bind="text:'£' + amount"></strong><br/>
                      <span data-bind="text:date"></span>
                    </td>
                    <td width="10"><span class="icon-arrow-right3"></span></td>
                  </tr>
                </tbody>
              </table>
              
              <table class="table">
                <tbody data-bind="foreach:notMatched">
                  <tr>
                    <td>
                      <strong data-bind="text:reference"></strong><br/>
                      <span data-bind="text:name"></span>
                    </td>
                    <td>
                      <strong data-bind="text:'£' + amount"></strong><br/>
                      <span data-bind="text:date"></span>
                    </td>
                    <td width="10"><span class="icon-arrow-right3"></span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </aside>

          <div class="app-page__main-content  app-page-list" >
            <div class="app-page-component" data-bind="if:selectedItem()">
              <div class="well well-sm  grid  grid-equals">
                <dl class="dl-horizontal  grid__item">
                  <dt>Payment ref:</dt>
                  <dd data-bind="text:selectedItem().reference"><dd>
                  <dt>Name:</dt>
                  <dd data-bind="text:selectedItem().name"><dd>
                </dl>
                <dl class="dl-horizontal  grid__item">
                  <dt>Date received:</dt>
                  <dd data-bind="text:selectedItem().date"><dd>
                  <dt>Amount received:</dt>
                  <dd data-bind="text:selectedItem().amount"><dd>
                </dl>
              </div>
            </div>
              
              <div class="app-page-component  table-component">
              
                <div class="table-component__header  header">
                  <div class="table-component-header__left  header__left  ">
                    <h4 class="table-component-header__title  header__title">
                      Matching accounts
                    </h4>
                  </div>
                  <div class="table-component-header__right  header__right  grid  grid--padded  grid-row--align-right">
                    <form class="form-inline form-group-sm  grid__item">
                      <div class="input-group">
                        <input class="form-control" type="search" placeholder="Search for payment..."  data-bind="event:{'keyup': handleSearchKeyUp}">
                        <div class="input-group-addon"><i class="icon-search"></i></div>
                      </div>
                    </form>
                    <div class="grid__item">
                      <button class="btn btn-default btn-sm">Filters</button>
                    </div>
                  </div>
                </div>

                <table id="app-page-main-list" class="app-page-list-content__table  table  table-striped  table-fixed-header  table-fill ">
                  <thead>
                    <tr>
                      <th style="max-width:3rem"></th>
                      <th style="max-width:30rem">Reference ID</th>
                      <th style="max-width:30rem" >Account holder</th>
                      <th style="max-width:30rem" >Account balance (£)</th>
                      <th>No of invoices</th>
                    </tr>
                  </thead>
                  <tbody data-bind="event:{scroll: handleTableScroll}, foreach: tenants">
                    <tr>
                      <td data-bind="click:$parent.expandRow.bind($parent)">
                        <span class="caret"></span>
                      </td>
                      <td data-bind="text:reference"></td>
                      <td data-bind="text:name"></td>
                      <td data-bind="text:balance"></td>
                      <td><span class="badge"  data-bind="text:invoices.length">2</span></td>
                    </tr>
                    <tr class="tr-expand-content" data-bind="visible: expanded()">
                      <td colspan="5">
                        <!-- ko if: invoices.length > 0 -->
                          <table style="margin-left:3rem" class="table table-condensed">
                            <thead>
                              <tr>
                                <th style="width:30rem">Item</th>
                                <th style="width:30rem">Owed from</th>
                                <th style="width:30rem">Amounts</th>
                                <th style="width:15rem">Pay</th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody data-bind="foreach: invoices">
                              <tr>
                                <td>
                                  <div><strong data-bind="text: '#' + id"></strong></div>
                                  <div data-bind="text: 'Rent demand for ' + description"></div>
                                </td>
                                <td>
                                  <span data-bind="text: owedFrom"></span>
                                  <span class="label label-warning">Due now!</span>
                                </td>
                                <td data-bind="text: (-total)"></td>
                                <td><label><input checked="checked" type="checkbox" class=""> Pay this</label></td>
                                <td><button class="btn btn-xs btn-default"><span class="icon-pencil"></span> edit amount</button></td>
                              </tr>
                            </tbody>
                            <tfoot>
                              <tr>
                                <th colspan="2">Total owed</th>
                                <th colspan="3" data-bind="text:(balance)">0.00</th>
                              </tr>
                              <tr>
                                <th colspan="2">Balance brought forward</th>
                                <th colspan="3">0.00</th>
                              </tr>
                              <tr>
                                <th colspan="2">Amount received</th>
                                <th colspan="3" data-bind="text:(-balance)"></th>
                              </tr>
                              <tr class="warning">
                                <th colspan="2">Balance</th>
                                <th colspan="3">0.00</th>
                              </tr>
                              <tr>
                                <th colspan="2"></th>
                                <th colspan="2"><button type="submit" class="btn btn-default btn-success" data-bind="click:$parent.handleAllocateToAccountClick.bind($parent)">Allocate to this account</button></th>
                              </tr>
                            </tfoot>
                          </table>
                    
                        <!-- /ko -->
                        <!-- ko if: invoices.length == 0 -->
                          <p>No outstanding invoices</p>
                        <!-- /ko -->
                        
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
          
        </div>
      </div>
    </div>

  </div>
  
</div>