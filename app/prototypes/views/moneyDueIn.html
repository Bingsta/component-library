<div class="app-container">
  <!-- ko widget: {kind:'productNavigation'}--><!--/ko-->
  <div class="app-main"  data-bind="css:{'app-navigation--open': uiController.appMenuOpen()}">
    <div class="app-header">
      <!-- ko widget: {kind:'globalHeader'}--><!--/ko-->
    </div>
    <div class="app-page-container"> 

      <div class="app-page app-list">

        <div class="app-page-masthead app-page__header">

          <div class="app-page-masthead__titlebar   header"> 
            <div class="app-page-masthead__titlebar-left  header__left grid__item--fill"> 
              <h2 class="app-page-masthead__titlebar-title   header__title">
                <small><a href="#accountingdashboard"><i class="icon-meter"></i></a> <i class="icon-arrow-right3"></i> </small>  Money due in</h2>
            </div>
            <div class="app-page-masthead__titlebar-right  header__right  grid grid-row--align-right">
              <div>
                <label class="branch-data-select__label" for="branch-data-select">Showing data from </label>
              </div>
              <div>
                <select id="branch-data-select" class="form-control input-sm">
                  <option>All branches</option>
                  <option>Swansea branch</option>
                  <option>Cardiff branch</option>
                  <option>Newport branch</option>
                  <option>Pontpandy branch</option>
                </select>
              </div>
            </div>
          </div>
          
        </div>
        <div class="app-page__content">

          <div class="app-page__main-content  app-page-list">
            <div class="app-page-component table-component">

                <div class="table-component__header  app-page-component__header  header">
                  <div class="table-component-header__left  header__left  ">
                    <h4 class="table-component-header__title  header__title">
                      Invoices to pay
                    </h4>
                  </div>
                  <div class="table-component-header__right  header__right  grid  grid--padded-sm  grid-row--align-right">
                    <form class="form-inline form-group-sm  grid__item">
                      <div class="input-group">
                        <input class="form-control" type="search" placeholder="Search for payment..."  data-bind="textInput:searchText">
                        <div class="input-group-addon"><i class="icon-search"></i></div>
                      </div>
                    </form>
                    <div class="grid__item">
                      <button class="btn btn-default btn-sm">Filters</button>
                    </div>
                    <div class="grid__item">
                      <button class="btn btn-primary btn-sm" data-bind="click:openUploadBankStatementDialog">Upload bank statement</button>
                    </div>
                  </div>
                </div>

                <table id="main-table" class="app-page-list-content__table table table-fixed-header table-fill table-hover table-striped" cellspacing="0" role="grid" aria-describedby="example_info">
                  <thead>
                    <tr role="row">
                      <th class="sorting_asc" tabindex="0"    style="min-width:6rem">   Reference</th>
                      <th class="sorting"     tabindex="1"    style="min-width:10rem">  Owed by</th>
                      <th class="sorting_asc" tabindex="2"    style="min-width:3rem;max-width:5rem">   Total (£)</th>
                      <th class="sorting"     tabindex="3"    style="min-width:3rem;max-width:5rem">   Paid (£)</th>
                      <th class="sorting"     tabindex="3"    style="min-width:3rem;max-width:8rem">   Avail. bal. (£)</th>
                      <th class="sorting"     tabindex="5"    style="min-width:6rem;max-width:10rem">  Inc. avail. bal. (£)</th>
                      <th class="sorting"     tabindex="4"    style="min-width:10rem">  To receipt (£)</th>
                      <th class="sorting"     tabindex="6"    style="min-width:3rem;max-width:3rem">   Type</th>
                      <th class="sorting"     tabindex="7"    style="min-width:15rem">  Regarding</th>
                      <th class="sorting"     tabindex="8"    style="min-width:5rem">   Due on</th>
                      <th class="sorting"     tabindex="9"    style="min-width:10rem">  Pay to</th>
                      <th class="sorting"     tabindex="10"   style="min-width:3rem;max-width:3rem">   Notes</th>
                    </tr>
                  </thead>
                </table>
                <tbody data-bind="event:{scroll: handleTableScroll}">

                </tbody>
            </div>
          </div>

          <aside class="app-page__aside">
            <div class="app-page-aside__content">
              <div class="app-page-aside__header  header">
                <div class="header__left">
                  <h4 class="header__title">Items to receipt...</h4>
                </div>
              </div>
              <div class="app-page-aside__body">
                
                 <!-- ko if:basket().length > 0 -->
                  <table class="table">
                    <tbody data-bind="foreach: basket()">
                      <tr class="list-aside-item" data-bind="click:$parent.showReceiptDetails">
                        <td data-bind="text:id"></td>
                        <td data-bind="text:amount.toLocaleString('en-UK', {style:'currency', currency:'GBP'})"></td>
                        <td><button class="btn btn-default btn-xs" data-bind="click:$parent.removeReceipt.bind($parent)">remove</button></td>
                      </tr>
                    </tbody>
                  </table>
                  <!-- /ko -->
                  <!-- ko if:basket().length == 0 -->
                  <div class="app-page-aside-page__inner">
                    <p>There are currently no items to receipt. To receipt an invoice. Enter an amount in the pay column and click "pay".</p>
                  </div>
                  <!-- /ko -->
                  
                  
                    <!-- Modal -->
                    <div class="modal fade" id="process-receipts-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content ">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">Process receipts</h4>
                          </div>
                          <div class="modal-body text-center" data-bind="css: {'alert-warning': (receiptsProcessingState() == processEnum.notStarted), 'alert-success': (receiptsProcessingState() == processEnum.completed)}">
                            <!-- ko if:receiptsProcessingState() == processEnum.notStarted -->
                            <p><i class="icon-warning icon"></i></p>
                            <p>Are you sure you want to process these <span data-bind="text: basket().length"></span> receipts?</p>
                            <p><strong>You cannot undo this once processed!</strong> </p>
                            <!-- /ko -->

                            <!-- ko if:receiptsProcessingState() == processEnum.started -->
                            <p>Processing...</p>
                            <!-- /ko -->

                            
                            <!-- ko if:receiptsProcessingState() == processEnum.completed -->
                            <p>Completed!</p>
                            <!-- /ko -->
                          </div>
                          <div class="modal-footer">
                            <!-- ko if:receiptsProcessingState() == processEnum.notStarted -->
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-success" data-bind="click: confirmProcessing">Proceed</button>
                            <!-- /ko -->

                            <!-- ko if:receiptsProcessingState() == processEnum.started -->
                            <!-- /ko -->

                            
                            <!-- ko if:receiptsProcessingState() == processEnum.completed -->
                            <button type="button" class="btn btn-default" data-dismiss="modal">Done</button>
                            <!-- /ko -->
                            
                          </div>
                        </div>
                      </div>
                    </div>
                  <!-- /ko -->
                
              </div>

              <div class="app-page-aside__footer grid  grid--padded-sm grid-row--align-right grid-row--center">
                <div class="grid__item">
                  <button class="btn btn-default" data-bind="click: saveReceipts, css: {disabled: basket().length == 0}">Save</button>
                </div>
                <div class="grid__item">
                  <button class="btn btn-success grid__item" data-bind="click: processReceipts, css: {disabled: basket().length == 0}">Process receipts</button>
                </div>
              </div>
            </div>
          </aside>

          
            
        </div>
      </div>
    </div>

  </div>
  
</div>